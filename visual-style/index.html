<!DOCTYPE html>
<!-- This code is for demonstration purposes only.  You should not hotlink to Github, Rawgit, or files from the Cytoscape.js documentation in your production apps. -->
<html>
	<head>
		<link href="style.css" rel="stylesheet" />
		<meta charset=utf-8 />
		<title>Visual style</title>
		<script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>
		<script src="https://unpkg.com/file-saver@1.3.8/FileSaver.js"></script>
		<script src="https://unpkg.com/cytoscape-svg/cytoscape-svg.js"></script>
		<script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script>
		<script src="https://rawgit.com/yWorks/svg2pdf.js/master/dist/svg2pdf.umd.js"></script>
	</head>

	<body>
		<button style="color: white; background-color: #008CBA; width: 100px; height: 30px;" onclick="saveAsSvg()">Save as SVG</button>
		<button style="color: white; background-color: #ff0000; width: 100px; height: 30px;" onclick="window.location=getSvgUrl()">View SVG</button>
		<button style="color: white; background-color: #00FFBA; width: 100px; height: 30px;" onclick="saveAsPdf('visual-style.pdf')">Save as PDF</button>
		<div id="cy"></div>
		<!-- Load application code at the end to ensure DOM is loaded -->
		<script src="code.js"></script>
		<script>
			var saveAsSvg = function(filename) {
				var svgContent = cy.svg({scale: 1, full: true});
				var blob = new Blob([svgContent], {type:"image/svg+xml;charset=utf-8"});
				saveAs(blob, "visual-style.svg");
			};
			var getSvgUrl = function() {
				var svgContent = cy.svg({scale: 1, full: true});
				var blob = new Blob([svgContent], {type:"image/svg+xml;charset=utf-8"});
				var url = URL.createObjectURL(blob);
				return url;
			};
			const saveAsPdf = function(filename) {
				const width = cy.width() * 1.1;
				const height = cy.height() * 1.1;
				const pdf = new jspdf.jsPDF("p","pt", [width, height]);
				const container = document.createElement('div');
				container.innerHTML = cy.svg();
				pdf.svg(container.firstChild).then(() => {
					pdf.save(filename, {width, height});
				});
			};

		</script>
	</body>
</html>
